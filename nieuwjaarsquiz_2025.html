<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéâ Nieuwjaarsquiz 2025</title>
    <style>
        :root{--gold:#FFD700;--orange:#FF6B35;--pink:#FF1493;--purple:#8B5CF6;--blue:#00D4FF;--green:#10B981;--red:#EF4444;--dark:#0a0a0f}*{margin:0;padding:0;box-sizing:border-box}body{font-family:system-ui,sans-serif;background:var(--dark);min-height:100vh;color:#fff}.bg{position:fixed;inset:0;pointer-events:none;background:radial-gradient(circle at 20% 80%,rgba(255,20,147,.15),transparent 40%),radial-gradient(circle at 80% 20%,rgba(139,92,246,.15),transparent 40%)}.screen{display:none;min-height:100vh;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:20px;position:relative;z-index:1}.screen.active{display:flex}h1{font-size:clamp(2rem,8vw,4rem);font-weight:900;background:linear-gradient(135deg,var(--gold),var(--orange),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:10px}.subtitle{color:rgba(255,255,255,.7);margin-bottom:30px}.year-badge{display:flex;gap:15px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);border-radius:100px;padding:12px 30px;margin-bottom:30px;font-family:monospace;font-size:1.5rem;font-weight:700}.year-old{color:rgba(255,255,255,.4);text-decoration:line-through}.year-new{color:var(--gold)}.btn{font-size:1rem;font-weight:700;padding:16px 35px;border:none;border-radius:100px;cursor:pointer;transition:.3s;text-transform:uppercase}.btn-primary{background:linear-gradient(135deg,var(--gold),var(--orange));color:var(--dark)}.btn-primary:hover{transform:translateY(-2px)}.btn-secondary{background:rgba(255,255,255,.1);color:#fff;border:2px solid rgba(255,255,255,.2)}.btn-group{display:flex;gap:15px;flex-wrap:wrap;justify-content:center}.code-box{background:linear-gradient(135deg,var(--purple),var(--pink));border-radius:25px;padding:30px 50px;margin-bottom:25px}.code-label{opacity:.8;margin-bottom:8px;text-transform:uppercase;letter-spacing:2px;font-size:.9rem}.code{font-family:monospace;font-size:clamp(2.5rem,12vw,5rem);font-weight:700;letter-spacing:10px}.join-info{background:rgba(255,255,255,.1);padding:12px 20px;border-radius:12px;margin-bottom:25px;font-size:.95rem}.players-title{font-size:1.3rem;margin-bottom:15px;color:var(--gold)}.players-grid{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;min-height:50px}.player-chip{background:rgba(255,255,255,.1);padding:10px 20px;border-radius:50px;font-weight:600;border:2px solid rgba(255,255,255,.2);animation:pop .3s}@keyframes pop{from{transform:scale(0)}to{transform:scale(1)}}.input{font-size:1.3rem;padding:18px 25px;border:3px solid rgba(255,255,255,.2);border-radius:18px;background:rgba(255,255,255,.05);color:#fff;text-align:center;width:100%;max-width:320px;margin-bottom:18px}.input:focus{outline:none;border-color:var(--gold)}.input::placeholder{color:rgba(255,255,255,.4)}.q-header{width:100%;display:flex;justify-content:space-between;padding:20px 30px;position:absolute;top:0}.q-num{opacity:.7}.timer{font-family:monospace;font-size:2.5rem;font-weight:700;color:var(--gold)}.timer.warn{color:var(--orange)}.timer.danger{color:var(--red);animation:pulse .5s infinite}@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}.q-text{font-size:clamp(1.2rem,3vw,1.8rem);font-weight:700;max-width:850px;line-height:1.4;margin-bottom:25px}.answers{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;width:100%;max-width:850px;padding:0 15px}.answer{padding:22px;border-radius:18px;font-size:clamp(.85rem,2vw,1.1rem);font-weight:600;display:flex;align-items:center;gap:12px}.answer:nth-child(1){background:var(--red)}.answer:nth-child(2){background:var(--blue)}.answer:nth-child(3){background:var(--gold);color:var(--dark)}.answer:nth-child(4){background:var(--green)}.answer-icon{font-size:1.3rem}.player-btns{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;width:100%;max-width:300px}.player-btn{aspect-ratio:1;border:none;border-radius:18px;font-size:2.5rem;cursor:pointer;color:#fff;transition:.2s}.player-btn:nth-child(1){background:var(--red)}.player-btn:nth-child(2){background:var(--blue)}.player-btn:nth-child(3){background:var(--gold);color:var(--dark)}.player-btn:nth-child(4){background:var(--green)}.player-btn.selected{box-shadow:0 0 0 4px #fff;transform:scale(1.05)}.player-btn:disabled{opacity:.5}.results{width:100%;max-width:550px}.result-bar{display:flex;align-items:center;margin-bottom:10px;gap:10px}.result-icon{font-size:1.3rem;width:45px;height:45px;display:flex;align-items:center;justify-content:center;border-radius:10px}.result-bar:nth-child(1) .result-icon{background:var(--red)}.result-bar:nth-child(2) .result-icon{background:var(--blue)}.result-bar:nth-child(3) .result-icon{background:var(--gold);color:var(--dark)}.result-bar:nth-child(4) .result-icon{background:var(--green)}.result-fill{height:45px;border-radius:10px;display:flex;align-items:center;padding:0 15px;font-weight:700;transition:width .8s;min-width:45px}.result-bar:nth-child(1) .result-fill{background:var(--red)}.result-bar:nth-child(2) .result-fill{background:var(--blue)}.result-bar:nth-child(3) .result-fill{background:var(--gold);color:var(--dark)}.result-bar:nth-child(4) .result-fill{background:var(--green)}.correct{box-shadow:0 0 0 3px #fff}.scoreboard{width:100%;max-width:450px}.score-row{display:flex;align-items:center;padding:15px 20px;background:rgba(255,255,255,.05);border-radius:12px;margin-bottom:8px}.score-row:nth-child(1){background:linear-gradient(135deg,var(--gold),var(--orange));color:var(--dark)}.score-row:nth-child(2){background:linear-gradient(135deg,#C0C0C0,#888);color:var(--dark)}.score-row:nth-child(3){background:linear-gradient(135deg,#CD7F32,#8B4513)}.score-rank{font-size:1.5rem;font-weight:900;width:45px}.score-name{flex:1;font-weight:600}.score-pts{font-family:monospace;font-weight:700}.wait-emoji{font-size:3.5rem;animation:bounce 1s infinite}@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}.wait-text{margin-top:15px;opacity:.7}.feedback{font-size:3.5rem;margin-bottom:15px}.fb-good{color:var(--green)}.fb-bad{color:var(--red)}.fb-pts{font-family:monospace;font-size:1.8rem;color:var(--gold)}.video-box{width:100%;max-width:480px;margin-bottom:18px;border-radius:12px;overflow:hidden}.video-box iframe{width:100%;height:270px;border:none}.music-tag{background:linear-gradient(135deg,var(--pink),var(--purple));padding:6px 15px;border-radius:50px;margin-bottom:12px;font-size:.85rem}.audio-viz{display:flex;gap:3px;height:30px;margin-bottom:12px;align-items:flex-end}.bar{width:5px;background:var(--gold);border-radius:3px;animation:wave .5s ease-in-out infinite alternate}.bar:nth-child(odd){animation-delay:.2s}@keyframes wave{from{height:6px}to{height:30px}}.confetti{position:fixed;width:8px;height:8px;top:-10px;animation:fall 3s linear forwards;z-index:999}@keyframes fall{to{transform:translateY(100vh) rotate(720deg)}}@media(max-width:600px){.answers{grid-template-columns:1fr}.code{letter-spacing:6px}.video-box iframe{height:200px}}
    </style>
</head>
<body>
<div class="bg"></div>
<div class="screen active" id="welcome"><h1>Nieuwjaarsquiz</h1><p class="subtitle">Test je kennis over 2025!</p><div class="year-badge"><span class="year-old">2025</span><span style="color:var(--gold)">‚Üí</span><span class="year-new">2026</span></div><div class="btn-group"><button class="btn btn-primary" onclick="hostStart()">üñ•Ô∏è Host</button><button class="btn btn-secondary" onclick="show('join')">üì± Speler</button></div></div>
<div class="screen" id="lobby"><div class="code-box"><div class="code-label">Spelcode</div><div class="code" id="theCode">----</div></div><div class="join-info" id="joinInfo">Spelers: open deze pagina op je telefoon</div><h3 class="players-title">Spelers (<span id="pCount">0</span>)</h3><div class="players-grid" id="pGrid"></div><button class="btn btn-primary" id="startBtn" onclick="gameStart()" style="margin-top:35px;opacity:.5" disabled>üöÄ Start!</button></div>
<div class="screen" id="join"><h2 style="margin-bottom:25px">Doe mee!</h2><input class="input" id="codeIn" placeholder="Spelcode" maxlength="4" style="text-transform:uppercase"><input class="input" id="nameIn" placeholder="Jouw naam" maxlength="12"><button class="btn btn-primary" onclick="playerJoin()">Meedoen! üéâ</button><button class="btn btn-secondary" onclick="show('welcome')" style="margin-top:12px">‚Üê Terug</button></div>
<div class="screen" id="waiting"><div class="wait-emoji">‚è≥</div><p class="wait-text">Wachten op host...</p><p style="margin-top:15px">Welkom, <span id="myName"></span>!</p></div>
<div class="screen" id="hostQ"><div class="q-header"><span class="q-num" id="qNum">Vraag 1/20</span><span class="timer" id="timerEl">20</span></div><div id="mediaBox"></div><h2 class="q-text" id="qText"></h2><div class="answers" id="answerGrid"></div></div>
<div class="screen" id="playerQ"><p id="pHint" style="margin-bottom:15px;opacity:.7">Kies je antwoord!</p><div class="audio-viz" id="vizBox" style="display:none"><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div></div><div class="player-btns"><button class="player-btn" onclick="sendAns(0)">‚ñ≤</button><button class="player-btn" onclick="sendAns(1)">‚óÜ</button><button class="player-btn" onclick="sendAns(2)">‚óè</button><button class="player-btn" onclick="sendAns(3)">‚ñ†</button></div></div>
<div class="screen" id="sent"><div class="wait-emoji">‚úì</div><p class="wait-text">Verzonden!</p></div>
<div class="screen" id="feedback"><div class="feedback" id="fbIcon">‚úì</div><p id="fbText" style="margin-bottom:12px"></p><p class="fb-pts" id="fbPts"></p><p style="margin-top:20px">Totaal: <span id="fbTotal">0</span></p></div>
<div class="screen" id="hostResults"><h2 style="margin-bottom:8px">Resultaten</h2><p id="correctText" style="color:var(--green);margin-bottom:20px"></p><div class="results" id="resBox"></div><button class="btn btn-primary" onclick="nextQ()" style="margin-top:30px">Volgende ‚Üí</button></div>
<div class="screen" id="hostScores"><h2 style="margin-bottom:25px;color:var(--gold)">üèÜ Tussenstand</h2><div class="scoreboard" id="scoreBox"></div><button class="btn btn-primary" onclick="nextQ()" style="margin-top:30px">Volgende ‚Üí</button></div>
<div class="screen" id="final"><h2 style="margin-bottom:25px;background:linear-gradient(135deg,var(--gold),var(--orange));-webkit-background-clip:text;-webkit-text-fill-color:transparent">üéâ Eindstand!</h2><div class="scoreboard" id="finalBox"></div><button class="btn btn-primary" onclick="location.reload()" style="margin-top:30px">Opnieuw</button></div>
<script>
const G={host:false,code:'',players:{},scores:{},answers:{},qi:0,timer:null,tLeft:20,ch:null,myId:'',myName:''};
const Q=[
{q:"Welke partij stapte juni 2025 uit coalitie?",a:["VVD","PVV","NSC","BBB"],c:1},
{q:"Waar was eerste NAVO-top in NL?",a:["Amsterdam","Rotterdam","Den Haag","Utrecht"],c:2},
{q:"üéµ Welk nummer?",a:["APT.","Die With A Smile","Espresso","Birds of a Feather"],c:1,m:true,v:"kPa7bsKwL-c",t:60},
{q:"NAVO secretaris-generaal 2025?",a:["Stoltenberg","Mark Rutte","Dick Schoof","Von der Leyen"],c:1},
{q:"Hoeveel mensen Rode Lijn demo okt?",a:["50.000","100.000","150.000","250.000"],c:3},
{q:"üéµ Welk nummer?",a:["Die With A Smile","Ordinary","APT.","Echte Liefde Is Te Koop"],c:2,m:true,v:"ekr2nIex040",t:45},
{q:"NL korte film won Oscar 2025?",a:["De Oost","Ik Ben Geen Robot","Babygirl","Haantjes"],c:1},
{q:"Wanneer TK-verkiezingen 2025?",a:["15 sept","1 okt","29 okt","15 nov"],c:2},
{q:"üéµ Welk nummer?",a:["Lunch","Birds of a Feather","Please Please Please","Good Luck Babe"],c:1,m:true,v:"3dZJXcuMlnk",t:30},
{q:"Welke partij ook 26 zetels?",a:["VVD","GL-PvdA","D66","CDA"],c:2},
{q:"Welk spel was hit in 2025?",a:["30 Seconds","Hitser","Stef Stansen","SongPop"],c:1},
{q:"üéµ Welk nummer?",a:["Espresso","Taste","Please Please Please","Feather"],c:0,m:true,v:"eVli-tstM5E",t:55},
{q:"Televizier-Ring 2025?",a:["Haantjes","Voetbal Ouders","Vandaag Inside","Jinek"],c:2},
{q:"Hoeveel jaar Amsterdam in 2025?",a:["700","725","750","800"],c:2},
{q:"üéµ Welk nummer?",a:["HOT TO GO!","Red Wine Supernova","Good Luck Babe","Pink Pony Club"],c:2,m:true,v:"ApXoWvfEYVU",t:50},
{q:"Ramp LA januari 2025?",a:["Aardbeving","Orkaan","Natuurbranden","Overstroming"],c:2},
{q:"NAVO norm uit Den Haag?",a:["Amsterdam Promise","The Hague Pledge","Rotterdam Accord","Dutch Deal"],c:1},
{q:"Topscoorder Oranje aller tijden?",a:["Van Persie","Memphis Depay","Van Dijk","Gakpo"],c:1},
{q:"Gestolen Drents Museum jan?",a:["Romeinse munten","Vikingsieraden","Egyptische items","Dacische goud"],c:3},
{q:"Toren omgevallen Valkenburg?",a:["Watertoren","Wilhelminatoren","Kerktoren","Uitzichttoren"],c:1}
];
function show(id){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active')}
function genCode(){const c='ABCDEFGHJKLMNPQRSTUVWXYZ23456789';let r='';for(let i=0;i<4;i++)r+=c[Math.floor(Math.random()*c.length)];return r}
function genId(){return'p'+Math.random().toString(36).substr(2,8)}
function setupCh(code){if(G.ch)G.ch.close();G.ch=new BroadcastChannel('quiz_'+code);G.ch.onmessage=onMsg}
function onMsg(e){const d=e.data;if(G.host){if(d.type==='join')addPlayer(d.id,d.name);if(d.type==='ans')G.answers[d.id]={ans:d.ans,time:d.time}}else{if(d.type==='go')show('playerQ');if(d.type==='q'){G.qi=d.i;enableBtns();document.getElementById('pHint').textContent=d.m?'üéµ Luister!':'Kies!';document.getElementById('vizBox').style.display=d.m?'flex':'none';show('playerQ')}if(d.type==='stop')disableBtns();if(d.type==='res')showFB(d);if(d.type==='end')showEnd(d)}}
function hostStart(){G.host=true;G.code=genCode();G.players={};G.scores={};document.getElementById('theCode').textContent=G.code;document.getElementById('joinInfo').textContent=location.href.split('?')[0];setupCh(G.code);show('lobby')}
function addPlayer(id,name){if(!G.players[id]){G.players[id]=name;G.scores[id]=0;const chip=document.createElement('div');chip.className='player-chip';chip.textContent=name;document.getElementById('pGrid').appendChild(chip);document.getElementById('pCount').textContent=Object.keys(G.players).length;document.getElementById('startBtn').disabled=false;document.getElementById('startBtn').style.opacity='1'}}
function gameStart(){G.qi=0;G.ch.postMessage({type:'go'});showQ()}
function showQ(){const q=Q[G.qi];G.answers={};document.getElementById('qNum').textContent=`Vraag ${G.qi+1}/${Q.length}`;document.getElementById('qText').textContent=q.q;const box=document.getElementById('mediaBox');box.innerHTML=q.m?`<div class="music-tag">üéµ Muziekvraag</div><div class="video-box"><iframe src="https://www.youtube.com/embed/${q.v}?autoplay=1&start=${q.t}" allow="autoplay" allowfullscreen></iframe></div>`:'';const icons=['‚ñ≤','‚óÜ','‚óè','‚ñ†'],grid=document.getElementById('answerGrid');grid.innerHTML='';q.a.forEach((a,i)=>{const d=document.createElement('div');d.className='answer';d.innerHTML=`<span class="answer-icon">${icons[i]}</span><span>${a}</span>`;grid.appendChild(d)});show('hostQ');startTimer(q.m?25:20);G.ch.postMessage({type:'q',i:G.qi,m:!!q.m})}
function startTimer(s){G.tLeft=s;updTimer();G.timer=setInterval(()=>{G.tLeft--;updTimer();if(G.tLeft<=0){clearInterval(G.timer);timeUp()}},1000)}
function updTimer(){const el=document.getElementById('timerEl');el.textContent=G.tLeft;el.className='timer'+(G.tLeft<=5?' danger':G.tLeft<=10?' warn':'')}
function timeUp(){document.getElementById('mediaBox').innerHTML='';G.ch.postMessage({type:'stop'});showRes()}
function showRes(){const q=Q[G.qi],box=document.getElementById('resBox');box.innerHTML='';const cnt=[0,0,0,0];Object.values(G.answers).forEach(a=>cnt[a.ans]++);const max=Math.max(...cnt,1),icons=['‚ñ≤','‚óÜ','‚óè','‚ñ†'];cnt.forEach((n,i)=>{const bar=document.createElement('div');bar.className='result-bar';bar.innerHTML=`<div class="result-icon">${icons[i]}</div><div class="result-fill${i===q.c?' correct':''}" style="width:45px">${n}</div>`;box.appendChild(bar);setTimeout(()=>bar.querySelector('.result-fill').style.width=Math.max(45,n/max*250)+'px',50)});document.getElementById('correctText').textContent='‚úì '+q.a[q.c];Object.entries(G.answers).forEach(([id,d])=>{if(d.ans===q.c)G.scores[id]=(G.scores[id]||0)+100+d.time*5});G.ch.postMessage({type:'res',c:q.c,scores:G.scores});show('hostResults')}
function nextQ(){G.qi++;if(G.qi>=Q.length)showFinalHost();else if(G.qi%5===0)showScoreBoard();else showQ()}
function showScoreBoard(){const box=document.getElementById('scoreBox');box.innerHTML='';Object.entries(G.scores).map(([id,s])=>({name:G.players[id],score:s})).sort((a,b)=>b.score-a.score).forEach((p,i)=>{const r=document.createElement('div');r.className='score-row';r.innerHTML=`<span class="score-rank">${i+1}</span><span class="score-name">${p.name}</span><span class="score-pts">${p.score}</span>`;box.appendChild(r)});show('hostScores')}
function showFinalHost(){const box=document.getElementById('finalBox');box.innerHTML='';Object.entries(G.scores).map(([id,s])=>({name:G.players[id],score:s})).sort((a,b)=>b.score-a.score).forEach((p,i)=>{const r=document.createElement('div');r.className='score-row';r.innerHTML=`<span class="score-rank">${i===0?'ü•á':i===1?'ü•à':i===2?'ü•â':i+1}</span><span class="score-name">${p.name}</span><span class="score-pts">${p.score}</span>`;box.appendChild(r)});confetti();G.ch.postMessage({type:'end',scores:G.scores});show('final')}
function playerJoin(){const code=document.getElementById('codeIn').value.toUpperCase(),name=document.getElementById('nameIn').value.trim();if(code.length!==4){alert('4-letter code');return}if(!name){alert('Naam nodig');return}G.host=false;G.code=code;G.myName=name;G.myId=genId();G.scores[G.myId]=0;setupCh(code);G.ch.postMessage({type:'join',id:G.myId,name});document.getElementById('myName').textContent=name;show('waiting')}
function sendAns(i){document.querySelectorAll('.player-btn').forEach((b,j)=>{b.classList.toggle('selected',i===j);b.disabled=true});G.ch.postMessage({type:'ans',id:G.myId,ans:i,time:15});setTimeout(()=>show('sent'),200)}
function enableBtns(){document.querySelectorAll('.player-btn').forEach(b=>{b.disabled=false;b.classList.remove('selected')})}
function disableBtns(){document.querySelectorAll('.player-btn').forEach(b=>b.disabled=true)}
function showFB(d){const my=d.scores[G.myId]||0,prev=G.scores[G.myId]||0,pts=my-prev;G.scores[G.myId]=my;document.getElementById('fbIcon').textContent=pts>0?'‚úì':'‚úó';document.getElementById('fbIcon').className='feedback '+(pts>0?'fb-good':'fb-bad');document.getElementById('fbText').textContent=pts>0?'Goed!':'Helaas!';document.getElementById('fbPts').textContent='+'+pts;document.getElementById('fbTotal').textContent=my;show('feedback')}
function showEnd(d){const my=d.scores[G.myId]||0,sorted=Object.entries(d.scores).sort((a,b)=>b[1]-a[1]),rank=sorted.findIndex(([id])=>id===G.myId)+1;document.getElementById('fbIcon').textContent=rank===1?'üèÜ':rank===2?'ü•à':rank===3?'ü•â':'üéâ';document.getElementById('fbIcon').className='feedback';document.getElementById('fbText').textContent=`Plaats ${rank}!`;document.getElementById('fbPts').textContent=my+' punten';document.getElementById('fbTotal').textContent=my;show('feedback');if(rank<=3)confetti()}
function confetti(){const cols=['#FFD700','#FF6B35','#FF1493','#8B5CF6','#00D4FF','#10B981'];for(let i=0;i<80;i++)setTimeout(()=>{const c=document.createElement('div');c.className='confetti';c.style.left=Math.random()*100+'vw';c.style.backgroundColor=cols[Math.floor(Math.random()*cols.length)];c.style.animationDuration=(2+Math.random()*2)+'s';document.body.appendChild(c);setTimeout(()=>c.remove(),4000)},i*30)}
window.onload=()=>{const p=new URLSearchParams(location.search).get('join');if(p){document.getElementById('codeIn').value=p;show('join')}}
</script>
</body>
</html>
